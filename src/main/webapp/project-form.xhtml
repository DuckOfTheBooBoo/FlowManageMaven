<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous"
        />
        <link
          rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
        />
        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="static/styles/project-form.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/js/bootstrap-datepicker.min.js" integrity="sha512-LsnSViqQyaXpD4mBBdRYeP6sRwJiJveh2ZIbW41EBrNmKxgr/LFZIiWT6yr+nycvhvauz8c2nYMhrP80YhG7Cw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/css/bootstrap-datepicker.min.css" integrity="sha512-34s5cpvaNG3BknEWSuOncX28vz97bRI59UnVtEEpFX536A7BtZSJHsDyFoCl8S7Dt2TPzcrCEoHBGeM4SUBDBw==" crossorigin="anonymous" referrerpolicy="no-referrer"></link>
        <title>New Project</title>
    </h:head>
    <h:body>
        <f:metadata>
            <f:viewParam name="project_id" value="#{projectBean.projectId}"/>
            <f:event type="preRenderView" listener="#{projectBean.init}" />
        </f:metadata>
        
        <div class="side-navigation d-flex flex-column">
            <a href="" class="d-block"><i class="bi bi-flower1"></i></a>

            <div class="page-nav">
                <h:form styleClass="d-flex flex-column gap-2">
                    <h:commandLink action="#{navigationBean.showPage}">
                        <f:param name="page" value="dashboard"/>
                        <i class="d-block bi bi-house-door-fill text-center"></i>
                    </h:commandLink>
                    <h:commandLink action="#{navigationBean.showPage}">
                        <f:param name="page" value="projects"/>
                        <i class="d-block bi bi-file-earmark-text-fill"></i>
                    </h:commandLink>
                </h:form>
            </div>
            <h:form>
                <h:commandLink styleClass="d-block" action="#{authBean.logout}">
                    <i class="bi bi-box-arrow-right"></i>
                </h:commandLink>
            </h:form>
        </div>

    <!-- MAIN BODY -->
    <div class="projects overflow-auto">
      <div class="main">
          <h3>#{projectBean.projectId != null ? 'Edit Project' : 'New Project'}</h3>
        <h:form>
          <div class="mb-3">
            <label for="projectTitle" class="form-label">Title</label>
            <h:inputText
              class="form-control"
              id="projectTitle"
              value="#{projectBean.title}"
              pt:placeholder="Project's title"
                >
                <f:validateLength minimum="1" maximum="255" />
            </h:inputText>
            <div id="titleHelp" class="form-text">
              This will be your project's title.
            </div>
            <h:message for="projectTitle" styleClass="text-danger" />
          </div>
          <div class="mb-3">
            <label for="projectDescription">Description</label>
            <h:inputTextarea
              class="form-control"
              id="projectDescription"
              pt:placeholder="Project's description"
              value="#{projectBean.description}"
              >
                <f:validateLength minimum="1" />
            </h:inputTextarea>
            <div id="descHelp" class="form-text">
              This will be your project's description.
            </div>
            <h:message for="projectDescription" styleClass="text-danger" />
          </div>
          <div class="mb-3">
            <label for="projectPriority">Priority:</label>
            <div class="dropdown">
                <h:selectOneMenu value="#{projectBean.priority}" id="priority">
                    <f:selectItems var="priority" value="#{projectBean.priorityList}" itemLabel="#{priority.label}" itemValue="#{priority.value}" /> 
                </h:selectOneMenu>
            </div>
            <h:message for="priority" styleClass="text-danger" />
          </div>
          <div class="mb-3">
              <label for="projectDeadline">Deadline</label>
              <h:inputText id="projectDeadline" styleClass="form-control datepicker"
                value="#{projectBean.deadline}" converterMessage="Enter deadline in MM/DD/YY format"
                required="true" requiredMessage="You must enter the project's deadline" pt:autocomplete="off">
                <f:convertDateTime pattern="MM/dd/yyyy" type="date"/>
              </h:inputText>
              <h:message for="projectDeadline" style="color:red"/>
            </div>
            <h:panelGroup layout="block" class="mb-3" rendered="#{projectBean.projectId != null}">
                <label for="projectStatus">Status: <br/></label>
              <h:selectOneMenu value="#{projectBean.statusId}" id="projectStatus">
                  <f:selectItems var="status" value="#{projectBean.statusList}" itemLabel="#{status.status}" itemValue="#{status.id}" /> 
              </h:selectOneMenu>
              <h:message for="projectStatus" style="color:red"/>
            </h:panelGroup> 
            <h:commandButton value="Save" class="btn" action="#{projectBean.saveProject(projectBean.projectId)}" />
        </h:form>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
      integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript">
        $(document).ready(function () {
        $('.datepicker').datepicker({
        });
        });
    </script>
    </h:body>
</html>

